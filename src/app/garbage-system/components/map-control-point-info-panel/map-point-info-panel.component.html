<div class="map-bar marker-details" *ngIf="model">
  <div class="item">
    <i class="howell-icon-garbage icon"></i>
    <div class="content">{{ model.name }}</div>
  </div>

  <div class="item">
    <i class="howell-icon-neighborhood icon"></i>
    <div class="content">
      {{ model.roadName | async
      }}<span *ngIf="model.roadName | async">&nbsp;&nbsp;&nbsp;&nbsp;</span
      >{{ model.committeeName | async }}
    </div>
  </div>

  <div class="item" *ngIf="model.address">
    <i class="howell-icon-map5 icon"></i>
    <div class="content">{{ model.address }}</div>
  </div>

  <div class="item">
    <div
      class="item"
      title="干垃圾重量"
      *ngIf="model.type === StationType.Construction"
      style="margin-right: 10px"
    >
      <i class="howell-icon-residual icon"></i>
      <div class="content">{{ model.dryWeight }} KG</div>
    </div>
    <div
      class="item"
      title="湿垃圾重量"
      *ngIf="model.type !== StationType.Construction"
    >
      <i class="howell-icon-kitchen icon"></i>
      <div class="content">{{ model.wetWeight }} KG</div>
    </div>
  </div>

  <div class="item" *ngIf="model.powerTime" title="最后一次NB上电请求时间">
    <i class="howell-icon-time icon"></i>
    <div class="content">
      {{ model.powerTime | date : "yyyy-MM-dd HH:mm:ss" }}
    </div>
  </div>
  <div class="item" *ngIf="model.heartbeatTime" title="最后一次心跳时间">
    <i class="howell-icon-heartbeat icon"></i>
    <div class="content">
      {{ model.heartbeatTime | date : "yyyy-MM-dd HH:mm:ss" }}
    </div>
  </div>
  <div class="item" *ngIf="model.heartbeatTime" title="信号">
    <i class="mdi mdi-signal icon"></i>
    <div class="content">{{ model.signal ?? 0 }} %</div>
  </div>

  <div
    class="item"
    *ngIf="!(model.powerOn === undefined)"
    title="最后一次NB请求命令"
  >
    <i class="mdi mdi-apple-keyboard-command icon"></i>
    <div class="content">{{ model.powerOn ? "唤醒" : "关闭" }}</div>
  </div>
  <ng-container *ngIf="!!model.largeWaste">
    <div class="item" title="设备ID">
      <div class="icon"><i class="mdi mdi-barcode"></i></div>
      <div class="content" [title]="model.largeWaste.MatchGuid">
        {{ model.largeWaste.MatchGuid }}
      </div>
    </div>
    <div class="item">
      <div class="icon"><i class="mdi mdi-tag"></i></div>
      <div>{{ model.largeWaste.Manufacturer }}</div>
    </div>
    <div class="item">
      <div class="icon">
        <i class="howell-icon-fullgarbage"></i>
      </div>
      <div class="content">
        {{ model.largeWaste.PercentageOfCapacity?.toFixed(2) }} %
      </div>
    </div>

    <div class="item">
      <div class="icon"><i class="mdi mdi-clock"></i></div>
      <div class="content">
        {{ model.largeWaste.UpdateTime | date : "yyyy-MM-dd HH:mm:ss" }}
      </div>
    </div>
    <div class="item">
      <div class="icon"><i class="mdi mdi-map-marker"></i></div>
      <div class="content">
        {{ model.location }}
      </div>
    </div>
  </ng-container>

  <div class="item" *ngFor="let member of model.members">
    <div class="item-name">
      <i class="howell-icon-man icon"></i>
      <div class="item-name__info">
        <div class="info-name">
          {{ member.Name }}
        </div>
        <div class="info-dash">-</div>
        <div class="info-note">
          {{ member.Note }}
        </div>
      </div>
    </div>
    <div class="item-phone">
      <i class="howell-icon-phone icon"></i><span>{{ member.MobileNo }}</span>
    </div>
  </div>
  <ng-container *ngIf="!!model.device && model.type === StationType.Rfid">
    <div class="item">
      <div class="icon"><i class="howell-icon-rfid"></i></div>
      <div class="content">
        {{ model.device.DeviceId }}
      </div>
    </div>
    <div class="item" *ngIf="model.device.OnlineState === 0">
      <div class="item-name">
        <i class="howell-icon-fanfailure icon" style="height: 100%"></i>
        <div class="item-name__info">
          <div class="info-name">排风扇</div>
          <div class="info-dash"></div>
          <div
            class="info-note"
            [ngClass]="{
              'powder-red-text': model.device.ExhaustFan === 0,
              'green-text': model.device.ExhaustFan === 1
            }"
          >
            {{ model.device.ExhaustFan === 0 ? "关闭" : "打开" }}
          </div>
        </div>
      </div>
      <div class="item-name" style="width: 42%">
        <i class="howell-icon-garbage_card icon" style="height: 100%"></i>
        <div class="item-name__info">
          <div class="info-name">读卡器</div>
          <div class="info-dash"></div>
          <div
            class="info-note"
            [ngClass]="{
              'powder-red-text': model.device.RfidReader === 1,
              'green-text': model.device.RfidReader === 0
            }"
          >
            {{ model.device.RfidReader === 0 ? "正常" : "异常" }}
          </div>
        </div>
      </div>
    </div>
  </ng-container>

  <div
    class="statistic"
    *ngIf="!!model.statistic && model.type !== StationType.Construction"
  >
    <div class="left">
      <div class="number">
        {{
          model.statistic === undefined
            ? 0
            : (model.statistic | async)?.GarbageStationGrade
        }}
      </div>
      <div class="suffix">分</div>
    </div>
    <div class="right">
      <!-- 查看垃圾滞留投放点信息 -->
      <div
        class="item"
        [title]="
          Language.json.see +
          Language.json.garbage +
          Language.json.stay +
          Language.json.station +
          Language.json.info
        "
        (click)="onGarbageRetentionClicked()"
      >
        <div><i class="howell-icon-garbagebags"></i></div>
        <!-- GarbageCount -->
        <a class="hw-link-underline value green-text a-text">{{
          model.statistic === undefined
            ? 0
            : (model.statistic | async)?.GarbageInterval
        }}</a>
      </div>
      <div
        class="item"
        [title]="
          Language.json.see +
          Language.json.EventType.IllegalDrop +
          Language.json.event +
          Language.json.record
        "
        (click)="onIllegalDropClicked()"
      >
        <div><i class="howell-icon-nolittering"></i></div>
        <a class="hw-link-underline value powder-red-text a-text">{{
          model.statistic === undefined
            ? 0
            : (model.statistic | async)?.IllegalDropCount
        }}</a>
      </div>
      <!-- "查看混合投放事件记录" -->
      <div
        class="item"
        [title]="
          Language.json.see +
          Language.json.EventType.MixedInto +
          Language.json.event +
          Language.json.record
        "
        (click)="onMixedIntoClicked()"
      >
        <div><i class="howell-icon-mixlittering"></i></div>
        <a class="hw-link-underline value light-purple-text a-text">{{
          model.statistic === undefined
            ? 0
            : (model.statistic | async)?.MixedIntoCount
        }}</a>
      </div>
    </div>
  </div>

  <div class="statistic1" style="display: none">
    <div class="grade">
      <div class="number">
        {{
          model.GarbageStationGrade ? (model.GarbageStationGrade | async) : "0"
        }}
      </div>
      <div class="suffix">分</div>
    </div>
    <div>
      <div class="garbage-count">
        <div
          class="item"
          title="查看垃圾滞留投放点信息"
          (click)="onGarbageRetentionClicked()"
        >
          <div><i class="howell-icon-garbagebags"></i></div>
          <!-- <div>垃圾滞留点</div> -->
          <a class="hw-link-underline value green-text a-text">{{
            model.statistic === undefined
              ? 0
              : (model.statistic | async)?.GarbageInterval
          }}</a>
        </div>
      </div>
      <div class="event-history">
        <div
          class="item"
          title="查看乱丢垃圾事件记录"
          (click)="onIllegalDropClicked()"
        >
          <div><i class="howell-icon-nolittering"></i></div>
          <!-- <div>{{Language.json.EventType.IllegalDrop}}</div> -->
          <a class="hw-link-underline value powder-red-text a-text">{{
            model.statistic === undefined
              ? 0
              : (model.statistic | async)?.IllegalDropCount
          }}</a>
        </div>
        <div
          class="item"
          title="查看混合投放事件记录"
          (click)="onMixedIntoClicked()"
        >
          <div><i class="howell-icon-mixlittering"></i></div>
          <!-- <div>混合投放</div> -->
          <a class="hw-link-underline value light-purple-text a-text">{{
            model.statistic === undefined
              ? 0
              : (model.statistic | async)?.MixedIntoCount
          }}</a>
        </div>
      </div>
    </div>
  </div>

  <div class="options">
    <div
      *ngFor="let item of model.options"
      class="state"
      [ngClass]="item.className"
      (click)="onoption(item)"
      [title]="item.title"
      [innerHTML]="item.language"
    ></div>

    <div
      *ngFor="let item of model.state"
      class="state"
      [ngClass]="item.className"
      (click)="onStateClicked(item)"
    >
      {{ item.language }}
    </div>
  </div>
</div>
